К STM32 подключены DHT11, фоторезистор (через делитель напряжения), кнопка, светодиод.

Для получения данных с DHT11 использован готовый код (лучше было бы найти без блокирующих циклов),
c фоторезистора данные получаем через ADC в режиме DMA, 
с кнопки через прерывание по фронту и спаду, затем проверяем состояние кнопки.

Данные с датчиков отправляется в последовательный порт в формате: [канал(ABC)][данные(0-255)], 
от 1 до 3 пакетов, в зависимости от готовности данных к отправке, затем [терминатор(\n)].

Приём данных - получение 3х байт с прерыванием по готовности пакета,
далее проверяется соответствие формату: [канал(D)][данные(0-255)][терминатор(\n)],
устанавливается значение ШИМ для светодиода.

Цикл приёма, отправки данных и установки яркости светодиода определяется таймером с прерыванием,
данные отправляются если значение отличается от прелылущего значения таймера,
можно доработать для разных интервалов отправки различных данных.

ESP32 принимает данные через последовательный порт, данные принимаются до терминирующего байта '\n',
затем в цикле определяются байты со значением канала и используются следующие за ним байты в качестве данных,
данные отправляются на сервер MQTT в соответствующий топик (только если было обновление данных).

MQTT сервер: Mosquitto, запущен на роутере.
MQTT клиент: MQTT Dash, настроен на телефоне.

TODO: использовать старт\стоп байты, контрольную сумму для проверки данных
